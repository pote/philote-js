!function(t,e,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd?define(o):e[t]=o()}("Philote",this,function(){"use strict";function t(t,e){return function(){return e.apply(t,arguments)}}function e(t){var e=JSON.parse(t.data),o=this.handlers[e.channel];if(o&&0!==o.length)for(var n=0;n<o.length;++n)o[n](e.data,e)}var o="https:"===location.protocol?"wss:":"ws:",n={server:o+"//ws.philote.io/",auth:{endpoint:"/philote/auth",transport:"ajax",params:{},headers:{}},error:function(){}},r=function(t){if(this===this.window)throw new Error("Need to instantiate via `new Philote`");var t=t||{},e=t.auth||{};this.options={server:t.server||n.server,auth:{endpoint:e.endpoint||n.auth.endpoint,transport:e.transport||n.auth.transport,params:e.params||n.auth.params,headers:e.headers||n.auth.headers},error:t.error||n.error},this.handlers={}};return r.protocol=o,r.prototype.connect=function(o,n){var r=this.options.server+"?token="+encodeURIComponent(o);this.socket=new Websocket(r),"function"==typeof n&&(this.socket.onopen=n),this.socket.onmessage=t(this,e)},r.prototype.disconnect=function(){this.socket&&this.socket.close()},r.prototype.subscribe=function(){console.log("Unimplemented yet...")},r.prototype.unsubscribe=function(){console.log("Unimplemented yet...")},r.prototype.on=function(t,e){if("function"!=typeof e)throw new Error("The callback must be a function");this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)},r.prototype.publish=function(){console.log("Unimplemented yet...")},r.VERSION="0.1.0",r});